<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
  
<ui:composition template="/WEB-INF/templates/BasicTemplate.xhtml">
	<ui:define name="content">
<h:form>
<p:panel id="panel" header="Historial de Busquedas Realizadas">

<h:form>
    <p:outputPanel deferred="true">
        <h3>Criterio de busqueda</h3>
    </p:outputPanel>
 </h:form>
	
    <h:form>
     <h:outputLabel for="usuario" value="" style="font-weight:bold" />
     	<p/>
        <p:inputText id="usuario" value="#{BusquedaBean.textoLibre}" >Usuario: 
        </p:inputText>
        <p/>
        
        <!--  De esta forma sin calendario
        <p:inputText id="fechaDesde" value="#{HistorialBusqueda.fechaDesde}"> Fecha Desde: 
        </p:inputText> -->
        <p:outputLabel for="fechaDesde" value="Fecha Desde:" />
        <p:calendar id="fechaDesde" value="#{calendarView.date3}" showOn="button" />
        
        <!--  De esta forma sin calendario 
        <p:inputText id="fechaHasta" value="#{HistorialBusqueda.fechaHasta}"> Fecha Hasta: 
        </p:inputText> -->
        <p:outputLabel for="fechaHasta" value="Fecha Hasta:" />
        <p:calendar id="fechaHasta" value="#{calendarView.date3}" showOn="button" />
     
     </h:form>
     <h:panelGrid columns="1" cellpadding="5">   
             
        <p:commandButton value="Buscar" update="display"
         actionListener="#{BusquedaBean.init}"  icon="ui-icon-search" 
       />
        
        <h:outputText id="display" value="#{basicView.text}" />
    </h:panelGrid>
    
    <h:form>
    <p:outputPanel deferred="true">
        <h3>Resultado</h3>
        
    </p:outputPanel>
 </h:form>
    
<p:dataTable var="poi" value="#{dtBasicView.poi}">
    <p:column headerText="Fecha">
        <h:outputText value="#{poi.nombre}" />
    </p:column>
 
    <p:column headerText="Usuario">
        <h:outputText value="#{poi.direccion}" />
    </p:column>
    
    <p:column headerText="Parametros">
        <h:outputText value="#{poi.direccion}" />
    </p:column>
    
    <p:column headerText="POIs">
    <h:outputText value="#{poi.direccion}" />
    </p:column>
    
    <p:column style="width:32px;text-align: center">
    	<p:commandButton update=":form:poiDetalle" oncomplete="PF('carOP').show('#{component.clientId}')" icon="ui-icon-search" title="View">
        	<f:setPropertyActionListener value="#{poi}" target="#{dtSelectionView.selectedPOI}" />
    	</p:commandButton>
    </p:column>
    
</p:dataTable>
    
    <p:overlayPanel widgetVar="carOP" showEffect="fade" hideEffect="fade" dismissable="false" showCloseIcon="true">
        <p:outputPanel id="poiDetalle" style="text-align:center;">
            <p:panelGrid  columns="2" rendered="#{not empty dtSelectionView.selectedPOI}" columnClasses="label,value">
 
                <h:outputText value="POI:" />
                <h:outputText value="#{dtSelectionView.selectedPOI.id}" />
 
            </p:panelGrid>
        </p:outputPanel>
    </p:overlayPanel>
    
    
			<p:commandButton value="Volver atrÃ s" update="panel"
					action="welcome"/>
			</p:panel> 
</h:form>

	</ui:define>
</ui:composition>
</html>
